(()=>{"use strict";var t={552:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.aabb2=void 0,r.aabb2=function(t,e,n,i){return void 0===t&&(t=1/0),void 0===e&&(e=1/0),void 0===n&&(n=-1/0),void 0===i&&(i=-1/0),r.aabb2.set(t,e,n,i,new Float32Array(4))},r.aabb2.copy=function(t,r){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r},r.aabb2.set=function(t,r,e,n,i){return i[0]=t,i[1]=r,i[2]=e,i[3]=n,i},r.aabb2.overlap=function(t,r){return t[0]<=r[2]&&t[1]<=r[3]&&t[2]>=r[0]&&t[3]>=r[1]},r.aabb2.contains=function(t,r){return t[0]<=r[0]&&t[1]<=r[1]&&t[2]>=r[2]&&t[3]>=r[3]},r.aabb2.add=function(t,r,e){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e},r.aabb2.intersect=function(t,r,e){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e},r.aabb2.pad=function(t,r,e){return e[0]=t[0]-r,e[1]=t[1]-r,e[2]=t[2]+r,e[3]=t[3]+r,e}},432:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.aabb3=void 0,r.aabb3=function(t,e,n,i,a,o){return void 0===t&&(t=1/0),void 0===e&&(e=1/0),void 0===n&&(n=1/0),void 0===i&&(i=-1/0),void 0===a&&(a=-1/0),void 0===o&&(o=1/0),r.aabb3.set(t,e,n,i,a,o,new Float32Array(6))},r.aabb3.set=function(t,r,e,n,i,a,o){return o[0]=t,o[1]=r,o[2]=e,o[3]=n,o[4]=i,o[5]=a,o},r.aabb3.overlap=function(t,r){return t[0]<=r[3]&&t[1]<=r[4]&&t[2]<=r[5]&&t[3]>=r[0]&&t[4]>=r[1]&&t[5]>=r[2]},r.aabb3.contains=function(t,r){return t[0]<=r[0]&&t[1]<=r[1]&&t[2]<=r[2]&&t[3]>=r[3]&&t[4]>=r[4]&&t[5]>=r[5]},r.aabb3.add=function(t,r,e){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e[4]=Math.max(t[4],r[4]),e[5]=Math.max(t[5],r[5]),e},r.aabb3.calculate=function(t,e,n,i){r.aabb3.set(1/0,1/0,1/0,-1/0,-1/0,-1/0,i);for(var a=0;a<t.length;a+=e)i[0]=Math.min(i[0],t[a+n+0]),i[1]=Math.min(i[1],t[a+n+1]),i[2]=Math.min(i[2],t[a+n+2]),i[3]=Math.max(i[3],t[a+n+0]),i[4]=Math.max(i[4],t[a+n+1]),i[5]=Math.max(i[5],t[a+n+2]);return i}},850:(t,r)=>{var e;Object.defineProperty(r,"__esModule",{value:!0}),r.solveQuadratic=r.insertionSort=r.binarySearch=r.hashString=r.int32pow2Floor=r.int32pow2Ceil=r.int32pow2=r.shuffle=r.range=r.smoothstep=r.lerpAngle=r.shortestAngle=r.randomInt=r.randomFloat=r.mod=r.clamp=r.lerp=r.random=void 0,r.random=(e=502,function(){var t=e+=1831565813;return t=Math.imul(t^t>>>15,1|t),(((t^=t+Math.imul(t^t>>>7,61|t))^t>>>14)>>>0)/4294967296}),r.lerp=function(t,r,e){return t+(r-t)*e},r.clamp=function(t,r,e){return Math.min(e,Math.max(r,t))},r.mod=function(t,r){return(t%r+r)%r},r.randomFloat=function(t,r,e){return e()*(r-t)+t},r.randomInt=function(t,r,e){return Math.floor(e()*(r-t+1))+t},r.shortestAngle=function(t,r){var e=(r-t)%(2*Math.PI);return 2*e%(2*Math.PI)-e},r.lerpAngle=function(t,e,n){return t+r.shortestAngle(t,e)*n},r.smoothstep=function(t,e,n){return t===e?n<t?0:1:(n=r.clamp((n-t)/(e-t),0,1))*n*(3-2*n)},r.range=function(t,r,e){void 0===e&&(e=[]),null==r&&(r=t,t=0);for(var n=t,i=0;n<r;n++,i++)e[i]=n;return e},r.shuffle=function(t,r){for(var e=t.length-1;e>0;e--){var n=r()*(e+1)|0,i=t[e];t[e]=t[n],t[n]=i}return t},r.int32pow2=function(t){return!(t&t-1||!t)},r.int32pow2Ceil=function(t){return t+=+(0===t),--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,1+(t|=t>>>16)},r.int32pow2Floor=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},r.hashString=function(t){for(var r=0,e=t.length,n=0;n<e;n++)r=(r<<5)-r+t.charCodeAt(n),r|=0;return r},r.binarySearch=function(t,r,e,n){for(var i=0,a=t.length;i<a;){var o=i+a>>>1;(n?e(t[o],r)<=0:e(t[o],r)<0)?i=o+1:a=o}return n?a:i},r.insertionSort=function(t,r){for(var e=t.length,n=void 0,i=0;i<e;i++){var a=t[i];for(n=i-1;n>=0&&r(a,t[n])>0;n--)t[n+1]=t[n];t[n+1]=a}},r.solveQuadratic=function(t,r,e){var n=r*r-4*t*e;if(n<0)return-1;var i=-.5*(r+Math.sign(r)*Math.sqrt(n));return Math.max(i/t,e/i)}},501:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.cubicBezierNormal3D=r.quadraticBezierNormal3D=r.cubicBezier3D=r.quadraticBezier3D=void 0,r.quadraticBezier3D=function(t,r,e,n,i){var a=n*n,o=1-n,u=o*o;return i[0]=u*t[0]+2*n*o*r[0]+a*e[0],i[1]=u*t[1]+2*n*o*r[1]+a*e[1],i[2]=u*t[2]+2*n*o*r[2]+a*e[2],i},r.cubicBezier3D=function(t,r,e,n,i,a){var o=i*i,u=i*i*i,c=1-i,s=c*c,h=s*c;return a[0]=h*t[0]+3*i*s*r[0]+3*o*c*e[0]+u*n[0],a[1]=h*t[1]+3*i*s*r[1]+3*o*c*e[1]+u*n[1],a[2]=h*t[2]+3*i*s*r[2]+3*o*c*e[2]+u*n[2],a},r.quadraticBezierNormal3D=function(t,r,e,n,i){return i[0]=2*(1-n)*(r[0]-t[0])+2*n*(e[0]-r[0]),i[1]=2*(1-n)*(r[1]-t[1])+2*n*(e[1]-r[1]),i[2]=2*(1-n)*(r[2]-t[2])+2*n*(e[2]-r[2]),i},r.cubicBezierNormal3D=function(t,r,e,n,i,a){var o=i*i,u=1-i,c=u*u;return a[0]=3*c*(r[0]-t[0])+6*u*i*(e[0]-r[0])+3*o*(n[0]-e[0]),a[1]=3*c*(r[1]-t[1])+6*u*i*(e[1]-r[1])+3*o*(n[1]-e[1]),a[2]=3*c*(r[2]-t[2])+6*u*i*(e[2]-r[2])+3*o*(n[2]-e[2]),a}},518:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.dualquat=void 0,r.dualquat=function(){return r.dualquat.set(0,0,0,1,0,0,0,0,new Float32Array(8))},r.dualquat.set=function(t,r,e,n,i,a,o,u,c){return c[0]=t,c[1]=r,c[2]=e,c[3]=n,c[4]=i,c[5]=a,c[6]=o,c[7]=u,c},r.dualquat.copy=function(t,r){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r},r.dualquat.slerp=function(t,r,e,n){var i=t[0],a=t[1],o=t[2],u=t[3],c=r[0],s=r[1],h=r[2],A=r[3],v=t[4],f=t[5],l=t[6],d=t[7];return i*c+a*s+o*h+u*A<0?(n[0]=e*(c+i)-i,n[1]=e*(s+a)-a,n[2]=e*(h+o)-o,n[3]=e*(A+u)-u,n[4]=-v+e*(r[4]+v),n[5]=-f+e*(r[5]+f),n[6]=-l+e*(r[6]+l),n[7]=-d+e*(r[7]+d)):(n[0]=i+e*(c-i),n[1]=a+e*(s-a),n[2]=o+e*(h-o),n[3]=u+e*(A-u),n[4]=v+e*(r[4]-v),n[5]=f+e*(r[5]-f),n[6]=l+e*(r[6]-l),n[7]=d+e*(r[7]-d)),n},r.dualquat.fromRotationTranslation=function(t,r,e){var n=t[0],i=t[1],a=t[2],o=t[3],u=.5*r[0],c=.5*r[1],s=.5*r[2];return e[0]=n,e[1]=i,e[2]=a,e[3]=o,e[4]=+u*o+c*a-s*i,e[5]=-u*a+c*o+s*n,e[6]=+u*i-c*n+s*o,e[7]=-u*n-c*i-s*a,e},r.dualquat.multiply=function(t,r,e){var n=t[0],i=t[1],a=t[2],o=t[3],u=r[4],c=r[5],s=r[6],h=r[7],A=t[4],v=t[5],f=t[6],l=t[7],d=r[0],m=r[1],g=r[2],p=r[3];return e[0]=n*p+o*d+i*g-a*m,e[1]=i*p+o*m+a*d-n*g,e[2]=a*p+o*g+n*m-i*d,e[3]=o*p-n*d-i*m-a*g,e[4]=n*h+o*u+i*s-a*c+A*p+l*d+v*g-f*m,e[5]=i*h+o*c+a*u-n*s+v*p+l*m+f*d-A*g,e[6]=a*h+o*s+n*c-i*u+f*p+l*g+A*m-v*d,e[7]=o*h-n*u-i*c-a*s+l*p-A*d-v*m-f*g,e}},594:function(t,r,e){var n=this&&this.__createBinding||(Object.create?function(t,r,e,n){void 0===n&&(n=e),Object.defineProperty(t,n,{enumerable:!0,get:function(){return r[e]}})}:function(t,r,e,n){void 0===n&&(n=e),t[n]=r[e]}),i=this&&this.__exportStar||function(t,r){for(var e in t)"default"===e||Object.prototype.hasOwnProperty.call(r,e)||n(r,t,e)};Object.defineProperty(r,"__esModule",{value:!0}),i(e(850),r),i(e(243),r),i(e(820),r),i(e(809),r),i(e(422),r),i(e(643),r),i(e(163),r),i(e(369),r),i(e(247),r),i(e(518),r),i(e(552),r),i(e(432),r),i(e(144),r),i(e(501),r)},422:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.mat2=void 0,r.mat2=function(){return r.mat2.identity(new Float32Array(4))},r.mat2.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},r.mat2.copy=function(t,r){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r},r.mat2.transpose=function(t,r){var e=t[1];return r[1]=t[2],r[2]=e,r===t||(r[0]=t[0],r[3]=t[3]),r},r.mat2.invert=function(t,r){var e=t[0],n=t[1],i=t[2],a=t[3],o=e*a-i*n;return o=o?1/o:0,r[0]=a*o,r[1]=-n*o,r[2]=-i*o,r[3]=e*o,r},r.mat2.multiply=function(t,r,e){var n=t[0],i=t[1],a=t[2],o=t[3],u=r[0],c=r[1],s=r[2],h=r[3];return e[0]=n*u+a*c,e[1]=i*u+o*c,e[2]=n*s+a*h,e[3]=i*s+o*h,e},r.mat2.transform=function(t,r,e){var n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i,e[1]=r[1]*n+r[3]*i,e}},163:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.mat3=void 0,r.mat3=function(){return r.mat3.identity(new Float32Array(9))},r.mat3.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},r.mat3.copy=function(t,r){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r},r.mat3.transpose=function(t,r){var e=t[1];return r[1]=t[3],r[3]=e,e=t[2],r[2]=t[6],r[6]=e,e=t[5],r[5]=t[7],r[7]=e,r===t||(r[0]=t[0],r[4]=t[4],r[8]=t[8]),r},r.mat3.invert=function(t,r){var e=t[0],n=t[1],i=t[2],a=t[3],o=t[4],u=t[5],c=t[6],s=t[7],h=t[8],A=h*o-u*s,v=-h*a+u*c,f=s*a-o*c,l=e*A+n*v+i*f;return l=l?1/l:0,r[0]=A*l,r[1]=(-h*n+i*s)*l,r[2]=(u*n-i*o)*l,r[3]=v*l,r[4]=(h*e-i*c)*l,r[5]=(-u*e+i*a)*l,r[6]=f*l,r[7]=(-s*e+n*c)*l,r[8]=(o*e-n*a)*l,r},r.mat3.multiply=function(t,r,e){var n=t[0],i=t[1],a=t[2],o=t[3],u=t[4],c=t[5],s=t[6],h=t[7],A=t[8],v=r[0],f=r[1],l=r[2];return e[0]=v*n+f*o+l*s,e[1]=v*i+f*u+l*h,e[2]=v*a+f*c+l*A,v=r[3],f=r[4],l=r[5],e[3]=v*n+f*o+l*s,e[4]=v*i+f*u+l*h,e[5]=v*a+f*c+l*A,v=r[6],f=r[7],l=r[8],e[6]=v*n+f*o+l*s,e[7]=v*i+f*u+l*h,e[8]=v*a+f*c+l*A,e},r.mat3.fromMat3x2=function(t,r){return r[0]=t[0],r[1]=t[1],r[2]=0,r[3]=t[2],r[4]=t[3],r[5]=0,r[6]=t[4],r[7]=t[5],r[8]=1,r},r.mat3.fromMat4=function(t,r){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[4],r[4]=t[5],r[5]=t[6],r[6]=t[8],r[7]=t[9],r[8]=t[10],r},r.mat3.fromQuat=function(t,r){var e=t[0],n=t[1],i=t[2],a=t[3],o=2*e,u=2*n,c=2*i,s=e*o,h=n*u,A=i*c,v=e*u,f=e*c,l=n*c,d=a*o,m=a*u,g=a*c;return r[0]=1-h-A,r[1]=v+g,r[2]=f-m,r[3]=v-g,r[4]=1-s-A,r[5]=l+d,r[6]=f+m,r[7]=l-d,r[8]=1-s-h,r},r.mat3.transform=function(t,r,e){var n=t[0],i=t[1],a=t[2];return e[0]=r[0]*n+r[3]*i+r[6]*a,e[1]=r[1]*n+r[4]*i+r[7]*a,e[2]=r[2]*n+r[5]*i+r[8]*a,e},r.mat3.normalize=function(t,r){var e=Math.hypot(t[0],t[1],t[2]);e=e&&1/e;var n=Math.hypot(t[3],t[4],t[5]);n=n&&1/n;var i=Math.hypot(t[6],t[7],t[8]);return i=i&&1/i,r[0]=t[0]*e,r[1]=t[1]*e,r[2]=t[2]*e,r[3]=t[3]*n,r[4]=t[4]*n,r[5]=t[5]*n,r[6]=t[6]*i,r[7]=t[7]*i,r[8]=t[8]*i,r},r.mat3.normalMatrix=function(t,r){var e=t[0],n=t[1],i=t[2],a=t[4],o=t[5],u=t[6],c=t[8],s=t[9],h=t[10];return r[0]=o*h-u*s,r[1]=u*c-a*h,r[2]=a*s-o*c,r[3]=i*s-n*h,r[4]=e*h-i*c,r[5]=n*c-e*s,r[6]=n*u-i*o,r[7]=i*a-e*u,r[8]=e*o-n*a,r},r.mat3.orthonormal=function(t,e){var n=t[2]>=0?1:-1,i=-1/(n+t[2]),a=t[0]*t[1]*i;return e[0]=1+n*t[0]*t[0]*i,e[1]=n*a,e[2]=-n*t[0],e[3]=a,e[4]=n+t[1]*t[1]*i,e[5]=-t[1],e[6]=t[0],e[7]=t[1],e[8]=t[2],r.mat3.normalize(e,e),e},r.mat3.rotation=function(t,r,e){var n=t[0],i=t[1],a=t[2],o=Math.sin(r),u=Math.cos(r),c=1-u,s=n*i*c,h=n*a*c,A=i*a*c;return e[0]=n*n*c+u,e[1]=s+a*o,e[2]=h-i*o,e[3]=s-a*o,e[4]=i*i*c+u,e[5]=A+n*o,e[6]=h+i*o,e[7]=A-n*o,e[8]=a*a*c+u,e},r.mat3.IDENTITY=r.mat3()},643:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.mat3x2=void 0,r.mat3x2=function(){return r.mat3x2.identity(new Float32Array(6))},r.mat3x2.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},r.mat3x2.copy=function(t,r){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r},r.mat3x2.invert=function(t,r){var e=t[0],n=t[1],i=t[2],a=t[3],o=t[4],u=t[5],c=e*a-n*i,s=c&&1/c;return r[0]=a*s,r[1]=-n*s,r[2]=-i*s,r[3]=e*s,r[4]=(i*u-a*o)*s,r[5]=(n*o-e*u)*s,r},r.mat3x2.multiply=function(t,r,e){var n=t[0],i=t[1],a=t[2],o=t[3],u=r[0],c=r[1],s=r[2],h=r[3],A=r[4],v=r[5];return e[0]=n*u+a*c,e[1]=i*u+o*c,e[2]=n*s+a*h,e[3]=i*s+o*h,e[4]=n*A+a*v+t[4],e[5]=i*A+o*v+t[5],e},r.mat3x2.orthogonal=function(t,r,e,n,i){var a=1/(t-r),o=1/(e-n);return i[0]=-2*a,i[1]=0,i[2]=0,i[3]=-2*o,i[4]=(t+r)*a,i[5]=(n+e)*o,i},r.mat3x2.transform=function(t,r,e){var n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i+r[4],e[1]=r[1]*n+r[3]*i+r[5],e},r.mat3x2.fromTransform=function(t,r,e,n,i,a,o,u,c,s){return s[0]=Math.cos(o+c)*i,s[1]=Math.sin(o+c)*i,s[2]=-Math.sin(o-u)*a,s[3]=Math.cos(o-u)*a,s[4]=t-e*s[0]-n*s[2],s[5]=r-e*s[1]-n*s[3],s},r.mat3x2.IDENTITY=r.mat3x2()},369:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.mat4=void 0,r.mat4=function(){return r.mat4.identity(new Float32Array(16))},r.mat4.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.mat4.copy=function(t,r){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r},r.mat4.transpose=function(t,r){var e=t[1];return r[1]=t[4],r[4]=e,e=t[2],r[2]=t[8],r[8]=e,e=t[3],r[3]=t[12],r[12]=e,e=t[6],r[6]=t[9],r[9]=e,e=t[7],r[7]=t[13],r[13]=e,e=t[11],r[11]=t[14],r[14]=e,r===t||(r[0]=t[0],r[5]=t[5],r[10]=t[10],r[15]=t[15]),r},r.mat4.invert=function(t,r){var e=t[0],n=t[1],i=t[2],a=t[3],o=t[4],u=t[5],c=t[6],s=t[7],h=t[8],A=t[9],v=t[10],f=t[11],l=t[12],d=t[13],m=t[14],g=t[15],p=e*u-n*o,M=e*c-i*o,y=e*s-a*o,w=n*c-i*u,b=n*s-a*u,I=i*s-a*c,E=h*d-A*l,q=h*m-v*l,S=h*g-f*l,O=A*m-v*d,x=A*g-f*d,C=v*g-f*m,B=p*C-M*x+y*O+w*S-b*q+I*E;return B=B?1/B:0,r[0]=(u*C-c*x+s*O)*B,r[1]=(i*x-n*C-a*O)*B,r[2]=(d*I-m*b+g*w)*B,r[3]=(v*b-A*I-f*w)*B,r[4]=(c*S-o*C-s*q)*B,r[5]=(e*C-i*S+a*q)*B,r[6]=(m*y-l*I-g*M)*B,r[7]=(h*I-v*y+f*M)*B,r[8]=(o*x-u*S+s*E)*B,r[9]=(n*S-e*x-a*E)*B,r[10]=(l*b-d*y+g*p)*B,r[11]=(A*y-h*b-f*p)*B,r[12]=(u*q-o*O-c*E)*B,r[13]=(e*O-n*q+i*E)*B,r[14]=(d*M-l*w-m*p)*B,r[15]=(h*w-A*M+v*p)*B,r},r.mat4.multiply=function(t,r,e){var n=t[0],i=t[1],a=t[2],o=t[3],u=t[4],c=t[5],s=t[6],h=t[7],A=t[8],v=t[9],f=t[10],l=t[11],d=t[12],m=t[13],g=t[14],p=t[15],M=r[0],y=r[1],w=r[2],b=r[3];return e[0]=M*n+y*u+w*A+b*d,e[1]=M*i+y*c+w*v+b*m,e[2]=M*a+y*s+w*f+b*g,e[3]=M*o+y*h+w*l+b*p,M=r[4],y=r[5],w=r[6],b=r[7],e[4]=M*n+y*u+w*A+b*d,e[5]=M*i+y*c+w*v+b*m,e[6]=M*a+y*s+w*f+b*g,e[7]=M*o+y*h+w*l+b*p,M=r[8],y=r[9],w=r[10],b=r[11],e[8]=M*n+y*u+w*A+b*d,e[9]=M*i+y*c+w*v+b*m,e[10]=M*a+y*s+w*f+b*g,e[11]=M*o+y*h+w*l+b*p,M=r[12],y=r[13],w=r[14],b=r[15],e[12]=M*n+y*u+w*A+b*d,e[13]=M*i+y*c+w*v+b*m,e[14]=M*a+y*s+w*f+b*g,e[15]=M*o+y*h+w*l+b*p,e},r.mat4.fromEulerRotation=function(t,r,e,n){var i=Math.sin(t),a=Math.sin(r),o=Math.sin(e),u=Math.cos(t),c=Math.cos(r),s=Math.cos(e);return n[0]=c*s,n[1]=c*o,n[2]=-a,n[3]=0,n[4]=i*a*s-u*o,n[5]=i*a*o+u*s,n[6]=i*c,n[7]=0,n[8]=u*a*s+i*o,n[9]=u*a*o-i*s,n[10]=u*c,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n},r.mat4.perspective=function(t,r,e,n,i){var a=1/Math.tan(t/2),o=1/(e-n);return i[0]=a/r,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=a,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=(n+e)*o,i[11]=-1,i[12]=0,i[13]=0,i[14]=2*n*e*o,i[15]=0,i},r.mat4.transform=function(t,r,e){var n=t[0],i=t[1],a=t[2],o=null==t[3]?1:t[3];return e[0]=r[0]*n+r[4]*i+r[8]*a+r[12]*o,e[1]=r[1]*n+r[5]*i+r[9]*a+r[13]*o,e[2]=r[2]*n+r[6]*i+r[10]*a+r[14]*o,e[3]=r[3]*n+r[7]*i+r[11]*a+r[15]*o,e},r.mat4.transformNormal=function(t,r,e){var n=t[0],i=t[1],a=t[2];return e[0]=r[0]*n+r[4]*i+r[8]*a,e[1]=r[1]*n+r[5]*i+r[9]*a,e[2]=r[2]*n+r[6]*i+r[10]*a,e},r.mat4.orthogonal=function(t,r,e,n,i,a,o){var u=1/(t-r),c=1/(e-n),s=1/(i-a);return o[0]=-2*u,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*c,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*s,o[11]=0,o[12]=(t+r)*u,o[13]=(n+e)*c,o[14]=(a+i)*s,o[15]=1,o},r.mat4.translate=function(t,r,e){var n=r[0],i=r[1],a=r[2];return e[12]=t[0]*n+t[4]*i+t[8]*a+t[12],e[13]=t[1]*n+t[5]*i+t[9]*a+t[13],e[14]=t[2]*n+t[6]*i+t[10]*a+t[14],e[15]=t[3]*n+t[7]*i+t[11]*a+t[15],e!==t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11]),e},r.mat4.scale=function(t,r,e){var n=r[0],i=r[1],a=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},r.mat4.rotate=function(t,r,e,n){var i=e[0],a=e[1],o=e[2],u=Math.sin(r),c=Math.cos(r),s=1-c,h=t[0],A=t[1],v=t[2],f=t[3],l=t[4],d=t[5],m=t[6],g=t[7],p=t[8],M=t[9],y=t[10],w=t[11],b=i*i*s+c,I=a*i*s+o*u,E=o*i*s-a*u,q=i*a*s-o*u,S=a*a*s+c,O=o*a*s+i*u,x=i*o*s+a*u,C=a*o*s-i*u,B=o*o*s+c;return n[0]=h*b+l*I+p*E,n[1]=A*b+d*I+M*E,n[2]=v*b+m*I+y*E,n[3]=f*b+g*I+w*E,n[4]=h*q+l*S+p*O,n[5]=A*q+d*S+M*O,n[6]=v*q+m*S+y*O,n[7]=f*q+g*S+w*O,n[8]=h*x+l*C+p*B,n[9]=A*x+d*C+M*B,n[10]=v*x+m*C+y*B,n[11]=f*x+g*C+w*B,n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n},r.mat4.fromRotationTranslationScale=function(t,r,e,n){var i=t[0],a=t[1],o=t[2],u=t[3],c=i+i,s=a+a,h=o+o,A=i*c,v=i*s,f=i*h,l=a*s,d=a*h,m=o*h,g=u*c,p=u*s,M=u*h,y=e[0],w=e[1],b=e[2];return n[0]=(1-(l+m))*y,n[1]=(v+M)*y,n[2]=(f-p)*y,n[3]=0,n[4]=(v-M)*w,n[5]=(1-(A+m))*w,n[6]=(d+g)*w,n[7]=0,n[8]=(f+p)*b,n[9]=(d-g)*b,n[10]=(1-(A+l))*b,n[11]=0,n[12]=r[0],n[13]=r[1],n[14]=r[2],n[15]=1,n},r.mat4.lookAt=function(t,r,e,n){var i=t[0],a=t[1],o=t[2],u=r[0],c=r[1],s=r[2],h=e[0],A=e[1],v=e[2],f=i-u,l=a-c,d=o-s,m=Math.sqrt(f*f+l*l+d*d),g=m?1/m:0,p=A*(d*=g)-v*(l*=g),M=v*(f*=g)-h*d,y=h*l-A*f,w=l*(y*=g=(m=Math.sqrt(p*p+M*M+y*y))?1/m:0)-d*(M*=g),b=d*(p*=g)-f*y,I=f*M-l*p;return w*=g=(m=Math.sqrt(w*w+b*b+I*I))?1/m:0,b*=g,I*=g,n[0]=p,n[1]=w,n[2]=f,n[3]=0,n[4]=M,n[5]=b,n[6]=l,n[7]=0,n[8]=y,n[9]=I,n[10]=d,n[11]=0,n[12]=-(p*i+M*a+y*o),n[13]=-(w*i+b*a+I*o),n[14]=-(f*i+l*a+d*o),n[15]=1,n},r.mat4.targetTo=function(t,r,e,n){var i=t[0],a=t[1],o=t[2],u=e[0],c=e[1],s=e[2],h=i-r[0],A=a-r[1],v=o-r[2],f=Math.sqrt(h*h+A*A+v*v),l=f?1/f:1,d=c*(v*=l)-s*(A*=l),m=s*(h*=l)-u*v,g=u*A-c*h;return d*=l=(f=Math.sqrt(d*d+m*m+g*g))?1/f:1,m*=l,g*=l,n[0]=d,n[1]=m,n[2]=g,n[3]=0,n[4]=A*g-v*m,n[5]=v*d-h*g,n[6]=h*m-A*d,n[7]=0,n[8]=h,n[9]=A,n[10]=v,n[11]=0,n[12]=i,n[13]=a,n[14]=o,n[15]=1,n},r.mat4.fromDualquat=function(t,r){var e=t[0],n=t[1],i=t[2],a=t[3],o=t[4],u=t[5],c=t[6],s=t[7],h=2*e*e,A=2*n*n,v=2*i*i,f=2*e*n,l=2*e*i,d=2*e*a,m=2*n*i,g=2*n*a,p=2*i*a;return r[0]=1-A-v,r[1]=f+p,r[2]=l-g,r[3]=0,r[4]=f-p,r[5]=1-h-v,r[6]=m+d,r[7]=0,r[8]=l+g,r[9]=m-d,r[10]=1-h-A,r[11]=0,r[12]=2*(-s*e+o*a-u*i+c*n),r[13]=2*(-s*n+o*i+u*a-c*e),r[14]=2*(-s*i-o*n+u*e+c*a),r[15]=1,r},r.mat4.decompose=function(t,r,e,n){r[0]=t[12],r[1]=t[13],r[2]=t[14];var i=t[0],a=t[1],o=t[2],u=t[4],c=t[5],s=t[6],h=t[8],A=t[9],v=t[10];e[0]=Math.hypot(i,a,o),e[1]=Math.hypot(u,c,s),e[2]=Math.hypot(h,A,v);var f=e[0]&&1/e[0],l=e[1]&&1/e[1],d=e[2]&&1/e[2];u*=f,h*=f,a*=l,A*=l,o*=d,s*=d;var m=(i*=f)+(c*=l)+(v*=d);if(m>0){var g=2*Math.sqrt(m+1);n[3]=.25*g,n[0]=(s-A)/g,n[1]=(h-o)/g,n[2]=(a-u)/g}else i>c&&i>v?(g=2*Math.sqrt(1+i-c-v),n[3]=(s-A)/g,n[0]=.25*g,n[1]=(a+u)/g,n[2]=(h+o)/g):c>v?(g=2*Math.sqrt(1+c-i-v),n[3]=(h-o)/g,n[0]=(a+u)/g,n[1]=.25*g,n[2]=(s+A)/g):(g=2*Math.sqrt(1+v-i-c),n[3]=(a-u)/g,n[0]=(h+o)/g,n[1]=(s+A)/g,n[2]=.25*g)},r.mat4.IDENTITY=r.mat4()},144:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.noise3D=r.noise2D=r.noise1D=void 0;var e=198491317;function n(t,r){return t*=3039394381,t+=r,t^=t>>8,t+=1759714724,t^=t>>8,t*=458671337,(t^=t>>8)/2147483647}r.noise1D=n,r.noise2D=function(t,r,i){return n(t+e*r,i)},r.noise3D=function(t,r,i,a){return n(t+e*r+6542989*i,a)}},247:(t,r,e)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.quat=void 0;var n=e(820),i=e(809);r.quat=function(){return i.vec4(0,0,0,1)},r.quat.copy=i.vec4.copy,r.quat.set=i.vec4.set,r.quat.normalize=i.vec4.normalize,r.quat.multiply=function(t,r,e){var n=t[0],i=t[1],a=t[2],o=t[3],u=r[0],c=r[1],s=r[2],h=r[3];return e[0]=n*h+o*u+i*s-a*c,e[1]=i*h+o*c+a*u-n*s,e[2]=a*h+o*s+n*c-i*u,e[3]=o*h-n*u-i*c-a*s,e},r.quat.conjugate=function(t,r){return r[0]=-t[0],r[1]=-t[1],r[2]=-t[2],r[3]=t[3],r},r.quat.transform=function(t,r,e){var n=t[0],i=t[1],a=t[2],o=r[0],u=r[1],c=r[2],s=r[3],h=s*n+u*a-c*i,A=s*i+c*n-o*a,v=s*a+o*i-u*n,f=-o*n-u*i-c*a;return e[0]=h*s+f*-o+A*-c-v*-u,e[1]=A*s+f*-u+v*-o-h*-c,e[2]=v*s+f*-c+h*-u-A*-o,e[3]=null==t[3]?1:t[3],e},r.quat.slerp=function(t,r,e,n){var i=t[0],a=t[1],o=t[2],u=t[3],c=r[0],s=r[1],h=r[2],A=r[3],v=i*c+a*s+o*h+u*A,f=Math.abs(v),l=1-e,d=e;if(1-f>1e-6){var m=Math.acos(f),g=Math.sin(m);l=Math.sin(l*m)/g,d=Math.sin(d*m)/g}return v<0&&(d*=-1),n[0]=l*i+d*c,n[1]=l*a+d*s,n[2]=l*o+d*h,n[3]=l*u+d*A,n},r.quat.axisAngle=function(t,r,e){var n=Math.sin(r*=.5);return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=Math.cos(r),e};var a={xyz:[1,-1,1,-1],xzy:[-1,-1,1,1],yxz:[1,-1,-1,1],yzx:[1,1,-1,-1],zxy:[-1,1,1,-1],zyx:[-1,1,-1,1]};r.quat.euler=function(t,r,e,n,i){var o=Math.sin(t*=.5),u=Math.cos(t),c=Math.sin(r*=.5),s=Math.cos(r),h=Math.sin(e*=.5),A=Math.cos(e),v=a[n];return i[0]=o*s*A+v[0]*u*c*h,i[1]=u*c*A+v[1]*o*s*h,i[2]=u*s*h+v[2]*o*c*A,i[3]=u*s*A+v[3]*o*c*h,i},r.quat.extractEuler=function(t,r,e){var n=t[0],i=t[1],a=t[2],o=t[3],u=n*n,c=i*i,s=n*n;switch(r){case"yzx":(h=n*i+a*o)*(A=h<0?-1:1)>.5-Number.EPSILON?(e[1]=2*A*Math.atan2(n,o),e[2]=.5*A*Math.PI,e[0]=0):(e[1]=Math.atan2(2*i*o-2*n*a,1-2*c-2*s),e[2]=Math.asin(2*h),e[0]=Math.atan2(2*n*o-2*i*a,1-2*u-2*s));break;case"xyz":var h,A;(h=n*o-i*a)*(A=h<0?-1:1)>.5-Number.EPSILON?(e[1]=2*A*Math.atan2(i,n),e[0]=.5*A*Math.PI,e[2]=0):(e[1]=Math.atan2(2*o*i+2*a*n,1-2*u-2*c),e[0]=Math.asin(2*h),e[2]=Math.atan2(2*o*a+2*n*i,1-2*s-2*u))}return e},r.quat.rotation=function(t,e,i){var a=n.vec3.dot(t,e),o=Math.sqrt(n.vec3.magnitudeSquared(t)*n.vec3.magnitudeSquared(e)),u=a/o;return u>=1?r.quat.copy(r.quat.IDENTITY,i):u<=-1?(n.vec3.orthogonal(t,i),n.vec3.normalize(i,i),i[3]=0,i):(n.vec3.cross(t,e,i),i[3]=o+a,r.quat.normalize(i,i))},r.quat.unitRotation=function(t,e,i){var a=n.vec3.dot(t,e);return a>=1?r.quat.copy(r.quat.IDENTITY,i):(a<=-1?(n.vec3.orthogonal(t,i),i[3]=0):(n.vec3.cross(t,e,i),i[3]=1+a),r.quat.normalize(i,i))},r.quat.fromNormal=function(t,r,e){var i=t[0],a=t[1],o=t[2],u=e;n.vec3.cross(r,t,u),n.vec3.normalize(u,u);var c=u[0],s=u[1],h=u[2];n.vec3.cross(t,u,u);var A=u[0],v=u[1],f=u[2],l=c+v+o;if(l>0){var d=.5/Math.sqrt(l+1);e[0]=(f-a)*d,e[1]=(i-h)*d,e[2]=(s-A)*d,e[3]=.25/d}else c>=v&&c>=o?(d=.5/Math.sqrt(1+c-v-o),e[0]=.25/d,e[1]=(s+A)*d,e[2]=(h+i)*d,e[3]=(f-a)*d):v>o?(d=.5/Math.sqrt(1+v-c-o),e[0]=(A+s)*d,e[1]=.25/d,e[2]=(a+f)*d,e[3]=(i-h)*d):(d=.5/Math.sqrt(1+o-c-v),e[0]=(i+h)*d,e[1]=(a+f)*d,e[2]=.25/d,e[3]=(s-A)*d);return e},r.quat.angle=function(t,r){var e=i.vec4.dot(t,r);return Math.acos(2*e*e-1)},r.quat.pow=function(t,r,e){var i=2*Math.acos(t[3]);n.vec3.normalize(t,e);var a=Math.cos(.5*r*i),o=Math.sin(.5*r*i);return e[0]*=o,e[1]*=o,e[2]*=o,e[3]=a,e},r.quat.decompose=function(t,e,a,o){var u=n.vec3.dot(e,t);if(n.vec3.scale(e,u,o),o[3]=t[3],i.vec4.dot(o,o)<Number.EPSILON)return r.quat.copy(t,a),void r.quat.copy(r.quat.IDENTITY,o);r.quat.normalize(o,o),r.quat.conjugate(o,a),r.quat.multiply(t,a,a)},r.quat.IDENTITY=r.quat()},243:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.vec2=void 0,r.vec2=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),r.vec2.set(t,e,new Float32Array(2))},r.vec2.set=function(t,r,e){return e[0]=t,e[1]=r,e},r.vec2.copy=function(t,r){return r[0]=t[0],r[1]=t[1],r},r.vec2.cross=function(t,r){return t[0]*r[1]-t[1]*r[0]},r.vec2.rotate=function(t,r,e){var n=Math.cos(r),i=Math.sin(r),a=t[0],o=t[1];return e[0]=n*a-i*o,e[1]=i*a+n*o,e},r.vec2.rotate90cw=function(t,r){var e=-t[0];return r[0]=t[1],r[1]=e,r},r.vec2.rotate90ccw=function(t,r){var e=-t[1];return r[1]=t[0],r[0]=e,r},r.vec2.add=function(t,r,e){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e},r.vec2.subtract=function(t,r,e){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e},r.vec2.multiply=function(t,r,e){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e},r.vec2.divide=function(t,r,e){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e},r.vec2.scale=function(t,r,e){return e[0]=t[0]*r,e[1]=t[1]*r,e},r.vec2.distanceSquared=function(t,r){var e=r[0]-t[0],n=r[1]-t[1];return e*e+n*n},r.vec2.distance=function(t,e){return Math.sqrt(r.vec2.distanceSquared(t,e))},r.vec2.manhattan=function(t,r){return Math.abs(r[0]-t[0])+Math.abs(r[1]-t[1])},r.vec2.magnitudeSquared=function(t){return t[0]*t[0]+t[1]*t[1]},r.vec2.magnitude=function(t){return Math.sqrt(r.vec2.magnitudeSquared(t))},r.vec2.normalize=function(t,r){var e=t[0],n=t[1],i=e*e+n*n,a=i&&1/Math.sqrt(i);return r[0]=e*a,r[1]=n*a,r},r.vec2.dot=function(t,r){return t[0]*r[0]+t[1]*r[1]},r.vec2.lerp=function(t,r,e,n){return n[0]=t[0]+e*(r[0]-t[0]),n[1]=t[1]+e*(r[1]-t[1]),n},r.vec2.reflect=function(t,r,e){var n=t[0]*r[0]+t[1]*r[1];return e[0]=t[0]-2*r[0]*n,e[1]=t[1]-2*r[1]*n,e},r.vec2.angle=function(t,e){return Math.acos(r.vec2.dot(t,e))},r.vec2.rotation=function(t){return Math.atan2(t[1],t[0])},r.vec2.equals=function(t,r,e){return Math.abs(t[0]-r[0])<=e&&Math.abs(t[1]-r[1])<=e},r.vec2.ZERO=r.vec2(0,0),r.vec2.HALF=r.vec2(.5,.5),r.vec2.ONE=r.vec2(1,1),r.vec2.AXIS_Y=r.vec2(0,1),r.vec2.AXIS_X=r.vec2(1,0)},820:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.vec3=void 0,r.vec3=function(t,e,n){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),r.vec3.set(t,e,n,new Float32Array(3))},r.vec3.copy=function(t,r){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r},r.vec3.set=function(t,r,e,n){return n[0]=t,n[1]=r,n[2]=e,n},r.vec3.dot=function(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]},r.vec3.subtract=function(t,r,e){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e},r.vec3.add=function(t,r,e){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e},r.vec3.cross=function(t,r,e){var n=t[0],i=t[1],a=t[2],o=r[0],u=r[1],c=r[2];return e[0]=i*c-a*u,e[1]=a*o-n*c,e[2]=n*u-i*o,e},r.vec3.magnitudeSquared=function(t){return t[0]*t[0]+t[1]*t[1]+t[2]*t[2]},r.vec3.distanceSquared=function(t,r){var e=t[0]-r[0],n=t[1]-r[1],i=t[2]-r[2];return e*e+n*n+i*i},r.vec3.magnitude=function(t){return Math.sqrt(r.vec3.magnitudeSquared(t))},r.vec3.distance=function(t,e){return Math.sqrt(r.vec3.distanceSquared(t,e))},r.vec3.normalize=function(t,r){var e=t[0],n=t[1],i=t[2],a=e*e+n*n+i*i,o=a&&1/Math.sqrt(a);return r[0]=e*o,r[1]=n*o,r[2]=i*o,r},r.vec3.scale=function(t,r,e){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e},r.vec3.multiply=function(t,r,e){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e},r.vec3.lerp=function(t,r,e,n){return n[0]=t[0]+e*(r[0]-t[0]),n[1]=t[1]+e*(r[1]-t[1]),n[2]=t[2]+e*(r[2]-t[2]),n},r.vec3.angle=function(t,e){var n=Math.sqrt(r.vec3.magnitudeSquared(t)*r.vec3.magnitudeSquared(e)),i=n&&r.vec3.dot(t,e)/n;return Math.acos(Math.min(Math.max(i,-1),1))},r.vec3.random=function(t,r,e){return t=2*t*Math.PI,r=2*r-1,e[2]=r,r=Math.sqrt(1-r*r),e[0]=Math.cos(t)*r,e[1]=Math.sin(t)*r,e},r.vec3.equals=function(t,r,e){return Math.abs(t[0]-r[0])<=e&&Math.abs(t[1]-r[1])<=e&&Math.abs(t[2]-r[2])<=e},r.vec3.orthogonal=function(t,e){var n=Math.abs(t[0]),i=Math.abs(t[1]),a=Math.abs(t[2]),o=n<i?n<a?r.vec3.AXIS_X:r.vec3.AXIS_Z:i<a?r.vec3.AXIS_Y:r.vec3.AXIS_Z;return r.vec3.cross(t,o,e),e},r.vec3.slerp=function(t,e,n,i){var a=r.vec3.angle(t,e),o=Math.sin(a),u=Math.sin((1-n)*a)/o,c=Math.sin(n*a)/o;return i[0]=t[0]*u+e[0]*c,i[1]=t[1]*u+e[1]*c,i[2]=t[2]*u+e[2]*c,i},r.vec3.project=function(t,e,n){var i=r.vec3.magnitudeSquared(e),a=i&&r.vec3.dot(t,e)/i;return r.vec3.scale(e,a,n)},r.vec3.projectPlane=function(t,e,n){var i=r.vec3.dot(t,e);return n[0]=t[0]-e[0]*i,n[1]=t[1]-e[1]*i,n[2]=t[2]-e[2]*i,n},r.vec3.centroid=function(){for(var t=arguments.length-1,r=1/t,e=0,n=0,i=0,a=t-1;a>=0;a--)e+=arguments[a][0],n+=arguments[a][1],i+=arguments[a][2];return arguments[t][0]=e*r,arguments[t][1]=n*r,arguments[t][2]=i*r,arguments[t]},r.vec3.ZERO=r.vec3(0,0,0),r.vec3.ONE=r.vec3(1,1,1),r.vec3.AXIS_X=r.vec3(1,0,0),r.vec3.AXIS_Y=r.vec3(0,1,0),r.vec3.AXIS_Z=r.vec3(0,0,1)},809:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.vec4=void 0,r.vec4=function(t,e,n,i){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=1),r.vec4.set(t,e,n,i,new Float32Array(4))},r.vec4.copy=function(t,r){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r},r.vec4.set=function(t,r,e,n,i){return i[0]=t,i[1]=r,i[2]=e,i[3]=n,i},r.vec4.dot=function(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]+t[3]*r[3]},r.vec4.scale=function(t,r,e){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e},r.vec4.normalize=function(t,r){var e=t[0],n=t[1],i=t[2],a=t[3],o=e*e+n*n+i*i+a*a,u=o&&1/Math.sqrt(o);return r[0]=e*u,r[1]=n*u,r[2]=i*u,r[3]=a*u,r},r.vec4.multiply=function(t,r,e){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e},r.vec4.lerp=function(t,r,e,n){return n[0]=t[0]+e*(r[0]-t[0]),n[1]=t[1]+e*(r[1]-t[1]),n[2]=t[2]+e*(r[2]-t[2]),n[3]=t[3]+e*(r[3]-t[3]),n},r.vec4.ZERO=r.vec4(0,0,0,0),r.vec4.ONE=r.vec4(1,1,1,1)},410:function(t,r){var e,n=this&&this.__extends||(e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])})(t,r)},function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)});Object.defineProperty(r,"__esModule",{value:!0}),r.TileSetMapGenerator=r.TextureMapGenerator=void 0;var i=function(){function t(t,r,e,n,i){this.width=t,this.height=r,this.size=e,this.periodic=n,this.heuristic=i,this.lastVisited=0,this.stack=[]}return t.randomIndex=function(t,r,e){if(void 0===e&&(e=0),!e)for(var n=t.length-1;n>=0;n--)e+=t[n];for(r*=e,n=t.length-1;n>=0;n--)if((e-=t[n])<=r)return n},t.prototype.precalculate=function(){if(!this.wave){this.visited=new Int32Array(this.width*this.height),this.wave=new Uint8Array(this.visited.length*this.count),this.compatible=new Uint32Array(this.visited.length*this.count*4),this.distribution=new Float32Array(this.count),this.logWeights=new Float32Array(this.count),this.totalWeight=this.totalLogWeight=0;for(var t=0;t<this.count;t++)this.totalWeight+=this.weights[t],this.logWeights[t]=this.weights[t]*Math.log(this.weights[t]),this.totalLogWeight+=this.logWeights[t];this.initialEntropy=Math.log(this.totalWeight)-this.totalLogWeight/this.totalWeight,this.remainders=new Int32Array(this.visited.length),this.nodeTotalWeight=new Float32Array(this.visited.length),this.nodeTotalLogWeight=new Float32Array(this.visited.length),this.entropies=new Float32Array(this.visited.length)}},t.prototype.generate=function(t,r){this.precalculate(),this.clear();for(var e=0;e<r||r<0;e++){var n=this.next(t);if(!(n>=0)){for(var i=0;i<this.visited.length;i++)for(var a=0;a<this.count;a++)if(this.wave[i*this.count+a]){this.visited[i]=a;break}return!0}if(this.visit(n,t),!this.propagate())return!1}return!0},t.prototype.next=function(t){for(var r=1e3,e=-1,n=this.lastVisited;n<this.visited.length;n++)if((this.periodic||!(n%this.width+this.size>this.width||(n/this.width|0)+this.size>this.height))&&!(this.remainders[n]<=1)){if("scanline"===this.heuristic)return this.lastVisited=n+1,n;var i="entropy"==this.heuristic?this.entropies[n]:this.remainders[n];i>r||(i+=1e-6*t())>=r||(r=i,e=n)}return e},t.prototype.visit=function(r,e){for(var n=0,i=r*this.count,a=0;a<this.count;a++)n+=this.distribution[a]=this.wave[i+a]?this.weights[a]:0;var o=t.randomIndex(this.distribution,e(),n);for(a=0;a<this.count;a++)this.wave[i+a]&&a!=o&&this.remove(r,a)},t.prototype.propagate=function(){for(var r=t.dx,e=t.dy;this.stack.length;)for(var n=this.stack.pop(),i=this.stack.pop(),a=i%this.width,o=i/this.width|0,u=0;u<4;u++){var c=a+r[u],s=o+e[u];if(this.periodic||!(c<0||s<0||c+this.size>this.width||s+this.size>this.height)){c<0?c+=this.width:c>=this.width&&(c-=this.width),s<0?s+=this.height:s>=this.height&&(s-=this.height);for(var h=c+s*this.width,A=this.propagator[4*n+u],v=0;v<A.length;v++){var f=A[v];0==--this.compatible[4*(h*this.count+f)+u]&&this.remove(h,f)}}}return this.remainders[0]>0},t.prototype.remove=function(t,r){this.stack.push(t,r),this.wave[t*this.count+r]=0;for(var e=4*(t*this.count+r),n=0;n<4;n++)this.compatible[e+n]=0;this.remainders[t]-=1,this.nodeTotalWeight[t]-=this.weights[r],this.nodeTotalLogWeight[t]-=this.logWeights[r],this.entropies[t]=Math.log(this.nodeTotalWeight[t])-this.nodeTotalLogWeight[t]/this.nodeTotalWeight[t]},t.prototype.clear=function(){for(var r=this.lastVisited=0;r<this.visited.length;r++){this.remainders[r]=this.weights.length,this.nodeTotalWeight[r]=this.totalWeight,this.nodeTotalLogWeight[r]=this.totalLogWeight,this.entropies[r]=this.initialEntropy,this.visited[r]=-1;for(var e=r*this.count,n=0;n<this.count;n++){this.wave[e+n]=1;for(var i=4*(e+n),a=0;a<4;a++)this.compatible[i+a]=this.propagator[4*n+t.opposite[a]].length}}},t.dx=[-1,0,1,0],t.dy=[0,1,0,-1],t.opposite=[2,3,0,1],t}(),a=function(t){function r(e,n,a,o,u,c,s){var h=t.call(this,n,a,e,o,"min")||this;h.colors=[];for(var A=u.width,v=u.height,f=new Uint32Array(u.data.buffer),l=new Uint32Array(A*v),d={},m=0;m<v;m++)for(var g=0;g<A;g++){var p=f[g+m*A];null==d[p]&&(d[p]=h.colors.push(p)-1),l[g+m*A]=d[p]}for(var M={},y=[],w=Array(8),b=0;b<8;b++)w[b]=Array(e*e);var I=c?v:v-e+1;for(m=0;m<I;m++){var E=c?A:A-e+1;for(g=0;g<E;g++){r.extract(l,A,v,g,m,h.size,w[0]),r.copy(e,r.symmetries[4],w[0],w[1]),r.copy(e,r.symmetries[1],w[0],w[2]),r.copy(e,r.symmetries[5],w[0],w[3]),r.copy(e,r.symmetries[2],w[0],w[4]),r.copy(e,r.symmetries[6],w[0],w[5]),r.copy(e,r.symmetries[3],w[0],w[6]),r.copy(e,r.symmetries[7],w[0],w[7]);for(var q=0;q<s;q++){var S=h.patternHash(w[q]);M[S]?M[S]++:(M[S]=1,y.push(S))}}}for(h.count=y.length,h.patterns=new Array(h.count),h.weights=new Float32Array(h.count),b=0;b<h.count;b++)h.patterns[b]=h.hashPattern(y[b],Array(e*e)),h.weights[b]=M[y[b]];h.propagator=new Array(4*h.count);for(var O=0;O<4;O++)for(var x=0;x<h.count;x++)for(var C=h.propagator[4*x+O]=[],B=0;B<h.count;B++)r.overlap(h.patterns[x],h.patterns[B],i.dx[O],i.dy[O],e)&&C.push(B);return h}return n(r,t),r.copy=function(t,r,e,n){for(var i=0;i<t;i++)for(var a=0;a<t;a++)n[i+a*t]=e[r(i,a,t)];return n},r.extract=function(t,r,e,n,i,a,o){for(var u=0;u<a;u++)for(var c=0;c<a;c++)o[c+u*a]=t[(n+c)%r+(i+u)%e*r];return o},r.overlap=function(t,r,e,n,i){for(var a=e<0?0:e,o=e<0?e+i:i,u=n<0?n+i:i,c=n<0?0:n;c<u;c++)for(var s=a;s<o;s++)if(t[s+i*c]!=r[s-e+i*(c-n)])return!1;return!0},r.prototype.patternHash=function(t){for(var r=0,e=1,n=this.colors.length,i=t.length,a=0;a<i;a++,e*=n)r+=t[i-1-a]*e;return r},r.prototype.hashPattern=function(t,r){for(var e=this.colors.length,n=Math.pow(e,this.size*this.size-1),i=0;i<r.length;i++,n/=e)t-=(r[i]=t/n|0)*n;return r},r.prototype.graphics=function(){if(console.log(this),!(this.visited[0]<0)){for(var t=new Uint32Array(this.width*this.height),r=0;r<this.height;r++)for(var e=r<this.height-this.size+1?0:this.size-1,n=0;n<this.width;n++){var i=n<this.width-this.size+1?0:this.size-1,a=this.colors[this.patterns[this.visited[n-i+(r-e)*this.width]][i+e*this.size]];t[n+r*this.width]=a}return new ImageData(new Uint8ClampedArray(t.buffer),this.width,this.height)}},r.prototype.set=function(t,r,e){this.mask||(this.mask=new Array(this.width*this.height*this.count));for(var n=this.colors.indexOf(e),i=0;i<this.size;i++)for(var a=0;a<this.size;a++){var o=t-a,u=r-i;if(this.periodic||!(o+this.size>this.width||u+this.size>this.height||o<0||u<0)){o<0&&(o+=this.width),u<0&&(u+=this.height);for(var c=0;c<this.count;c++)this.patterns[c][a+i*this.size]!==n&&(this.mask[(o+u*this.width)*this.count+c]=!0)}}},r.prototype.clear=function(){if(t.prototype.clear.call(this),this.mask){for(var r=0;r<this.visited.length;r++)for(var e=0;e<this.count;e++)this.mask[r*this.count+e]&&this.remove(r,e);if(!this.propagate())throw"Impossible configuration"}},r.symmetries=[function(t,r,e){return t+r*e},function(t,r,e){return e-1-r+t*e},function(t,r,e){return e-1-t+(e-1-r)*e},function(t,r,e){return r+(e-1-t)*e},function(t,r,e){return e-1-t+r*e},function(t,r,e){return e-1-r+(e-1-t)*e},function(t,r,e){return t+(e-1-r)*e},function(t,r,e){return r+t*e}],r}(i);r.TextureMapGenerator=a;var o=function(t){function r(e,n,i,a){var o=t.call(this,n,i,1,a,"min")||this;o.tiles=[];for(var u=[],c=[],s=[],h=0;h<e.symmetry.length;h++){var A=r.symmetry[e.symmetry[h]],v=A.rotate,f=A.reflect,l=A.cardinality,d=s.length;c.push(d);for(var m=0;m<l;m++)s.push([d+m,d+v(m),d+v(v(m)),d+v(v(v(m))),d+f(m),d+f(v(m)),d+f(v(v(m))),d+f(v(v(v(m))))]),o.tiles.push(8*h+m),u.push(e.weight[h]||1)}o.count=s.length,o.weights=new Float32Array(u),o.propagator=new Array(4*o.count);var g=new Array(4*o.count*o.count);for(h=0;h<e.constraints.length;h++){var p=e.constraints[h],M=p[0],y=p[1],w=p[2],b=p[3],I=s[c[M]][y],E=s[I][1],q=s[c[w]][b],S=s[q][1];g[0+4*q+4*o.count*I]=!0,g[0+4*s[q][6]+4*o.count*s[I][6]]=!0,g[0+4*s[I][4]+4*o.count*s[q][4]]=!0,g[0+4*s[I][2]+4*o.count*s[q][2]]=!0,g[1+4*S+4*o.count*E]=!0,g[1+4*s[E][6]+4*o.count*s[S][6]]=!0,g[1+4*s[S][4]+4*o.count*s[E][4]]=!0,g[1+4*s[E][2]+4*o.count*s[S][2]]=!0}for(var O=0;O<o.count;O++)for(var x=0;x<o.count;x++)g[2+4*O+4*o.count*x]=g[0+4*x+4*o.count*O],g[3+4*O+4*o.count*x]=g[1+4*x+4*o.count*O];for(var C=0;C<4;C++)for(x=0;x<o.count;x++){var B=o.propagator[4*x+C]=[];for(O=0;O<o.count;O++)g[C+4*x+4*o.count*O]&&B.push(O);if(!B.length)throw"Tile "+(o.tiles[x]/8|0)+" has no neighbours in direction "+C}return o}return n(r,t),r.prototype.graphics=function(t){var r=t[0].width,e=new Uint32Array(this.width*this.height*r*r),n=new Uint32Array(r*r);if(!(this.visited[0]<0)){for(var i=0;i<this.width;i++)for(var o=0;o<this.height;o++){var u=this.tiles[this.visited[i+o*this.width]],c=u/8|0,s=u%8;a.copy(r,a.symmetries[s],new Uint32Array(t[c].data.buffer),n);for(var h=0;h<r;h++)for(var A=0;A<r;A++){var v=n[h+A*r];e[i*r+h+(o*r+A)*this.width*r]=v}}return new ImageData(new Uint8ClampedArray(e.buffer),this.width*r,this.height*r)}},r.symmetry={L:{cardinality:4,rotate:function(t){return(t+1)%4},reflect:function(t){return t%2==0?t+1:t-1}},T:{cardinality:4,rotate:function(t){return(t+1)%4},reflect:function(t){return t%2==0?t:4-t}},I:{cardinality:2,rotate:function(t){return 1-t},reflect:function(t){return t}},"\\":{cardinality:2,rotate:function(t){return 1-t},reflect:function(t){return 1-t}},F:{cardinality:8,rotate:function(t){return t<4?(t+1)%4:4+(t-1)%4},reflect:function(t){return t<4?t+4:t-4}},X:{cardinality:1,rotate:function(t){return t},reflect:function(t){return t}}},r}(i);r.TileSetMapGenerator=o}},r={};function e(n){var i=r[n];if(void 0!==i)return i.exports;var a=r[n]={exports:{}};return t[n].call(a.exports,a,a.exports,e),a.exports}(()=>{var t=e(410),r=e(594),n=4294967295,i=4278190080,a=4278255360,o=new ImageData(new Uint8ClampedArray(new Uint32Array([n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,a,a,a,n,n,n,n,n,n,n,n,n,n,n,n,n,a,4278190335,a,n,n,n,i,i,i,i,a,i,i,i,n,n,a,a,a,n,n,n,i,n,n,n,n,n,n,i,n,n,n,n,n,n,n,n,i,n,n,n,n,n,n,a,n,n,n,n,n,n,i,i,i,a,i,i,i,n,n,i,a,n,n,n,n,n,i,n,n,n,n,n,i,n,n,n,a,n,n,i,n,n,a,n,n,n,n,n,i,n,n,n,a,n,n,n,n,n,i,n,n,a,i,i,i,i,a,i,i,n,i,i,a,i,i,n,n,a,n,n,i,n,n,i,n,n,i,n,n,n,i,i,i,i,n,n,i,n,n,i,n,n,i,n,n,n,n,n,n,i,n,n,a,n,n,i,n,n,a,n,n,n,n,n,n,i,i,i,a,a,i,i,n,n,i,n,n,n,n,n,n,i,n,n,n,n,n,n,n,n,i,i,i,a,a,i,i,i,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,i,n,n,n,n,n]).buffer),16,16);function u(t){var r=document.createElement("canvas");return r.width=t.width,r.height=t.height,r.style.imageRendering="pixelated",r.getContext("2d").putImageData(t,0,0),document.body.appendChild(r),r}Object.assign(u(o).style,{width:"100px",height:"100px"}),document.querySelector(".overlay").style.display="none";var c=new t.TextureMapGenerator(3,20,20,!1,o,!0,8);if(!c.generate(r.random,-1))throw"FAILED";var s=c.graphics();console.log(window.m=c,s),Object.assign(u(s).style,{width:"100%"});var h=Promise.all(["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAIAAABLMMCEAAAACXBIWXMAAAsSAAALEgHS3X78AAAAM0lEQVQImWOccUQ0495lBiQwQ0mX8f9JPgYMwPj/E6YgAxMWMVyiLAzXsZjLMvM3O6YbAL+hDchoiFysAAAAAElFTkSuQmCC","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAIAAABLMMCEAAAACXBIWXMAAAsSAAALEgHS3X78AAAAFElEQVQImWOccUSUAQMwYQrRXRQA4GsBf+NZCRoAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAIAAABLMMCEAAAACXBIWXMAAAsSAAALEgHS3X78AAAAG0lEQVQImWOccUQ0495lBiQwQ0mXiQEboK8oAJIABH/orAscAAAAAElFTkSuQmCC","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAIAAABLMMCEAAAACXBIWXMAAAsSAAALEgHS3X78AAAAL0lEQVQImWOccUQ0495lBiQwQ0mXiQEDZNy7jEWUgYEBt+gMJV3satEkWJCthrMB33UJTxrFxY8AAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAIAAABLMMCEAAAACXBIWXMAAAsSAAALEgHS3X78AAAAJElEQVQImWOccUSUgYEhXe81AwMDAwPDzEuiDAwMTAzYAH1FAYkJBH9MGQTZAAAAAElFTkSuQmCC","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAIAAABLMMCEAAAACXBIWXMAAAsSAAALEgHS3X78AAAAM0lEQVQImWOccUSUgYEhXe81AwMDAwPDzEuiDAwMTAzYAAsaH6IJu1omZOOwmIAsgd0EAJ7QCQOm1vQdAAAAAElFTkSuQmCC","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAIAAABLMMCEAAAACXBIWXMAAAsSAAALEgHS3X78AAAALklEQVQImWOccUSUAQMwYQoxMDAw/v+ERRS7WuyiLDMviTIwMKTrvYbwIVzsagFRIgfx3PGauAAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAIAAABLMMCEAAAACXBIWXMAAAsSAAALEgHS3X78AAAAJ0lEQVQImWNgYGBgYGCor6+HkwwMDIzIHAhobGxkRBOilloGrG4AAHP2EfRKAuMzAAAAAElFTkSuQmCC","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAIAAABLMMCEAAAACXBIWXMAAAsSAAALEgHS3X78AAAANUlEQVQImWOccUQ0w+Z1fX09AwMDAwNDY2PjjCOijDOOiD7fncWABCRdpzFB5OFCEDat1AIAWiQd4Xc2GiMAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAIAAABLMMCEAAAACXBIWXMAAAsSAAALEgHS3X78AAAARklEQVQImWOccUT0+e4sBiQg6TqNkWHRC4Y4ifr6eohQY2Mjw6IXTAzYACPDohf1d6cjCzUqZzJBdcGFGhsZGBhwmIDVDQD5FxcHuCuhbwAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAIAAABLMMCEAAAACXBIWXMAAAsSAAALEgHS3X78AAAAR0lEQVQImWOccUQ0w+Z1fX09AwMDAwNDY2PjjCOijDOOiD7fncWABCRdpzH+/8TAyMeArPb/JwYmBmwAuyh2c5kgZsGFIGwAzicaVbj/psYAAAAASUVORK5CYII="].map((function(t){return new Promise((function(r){var e=new Image;e.src=t,e.onload=function(){var t=document.createElement("canvas"),n=t.getContext("2d");t.width=e.naturalWidth,t.height=e.naturalHeight,n.drawImage(e,0,0),r(n.getImageData(0,0,t.width,t.height))}}))}))),A=new t.TileSetMapGenerator({weight:[1,1,1,1,1,1,1],symmetry:["I","X","I","L","I","L","T"],constraints:[[0,1,2,1],[0,1,3,1],[0,0,4,1],[0,0,5,1],[0,0,6,0],[0,0,6,3],[1,0,1,0],[1,0,2,0],[1,0,3,0],[1,0,4,0],[1,0,5,0],[1,0,6,1],[2,1,2,1],[2,1,3,1],[2,0,4,0],[2,0,5,0],[2,0,6,1],[3,0,3,2],[4,0,3,0],[5,1,3,0],[5,2,3,0],[6,3,3,0],[4,1,4,1],[5,0,4,1],[4,1,6,0],[4,1,6,3],[5,0,5,2],[5,0,6,0],[6,0,6,2]]},20,20,!1);if(!A.generate(r.random,-1))throw"FAILED B";h.then((function(t){var r=A.graphics(t);console.log(window.mb=A,r),Object.assign(u(r).style,{width:"100%"})}))})()})();